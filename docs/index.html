<html>
<head>
  
  <link href="./style.css" rel="stylesheet" type="text/css" media="all" />
  <script src="./jquery.js"></script>
  <script src="./masonry.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/macy@2"></script>

  <meta property="og:image" content="https://www.txwt.fun/og.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="607" />

  <meta name="viewport" content="width=device-width, initial-scale=1">


</head>
<body>
  <img src="./img/logowithflower.png" class="logo"/>
  <div class="ctas" style="text-align: center;"><a href="https://www.dropbox.com/request/dlf3Ip9vvtMqqJiiB2rm">Upload your 2024 pictures to here to share for this year!</a></div>
  
  <div class="thankyous"></div>
  <div class="caveats">Please <strong>do not post uncredited images</strong> to your social media, every photo here shows who took the picture if you hover/click it, always ask first!</div>

  <div class="images"></div>
  

  <div class="load_more"><button class="load_more_images">...load more...</button></div>
  <div class="info"><span class="loaded_so_far">0</span> of <span class="loaded">0</span> files loaded</div>

  <script>
    window.reinitgrid = function() {
      console.log('shall we re-initi');
      grid.reInit();
    }
    $(document).ready(function(){

      var image_list = ["./images/2024/hummusrules/20240820_183623 dave.jpg.800.jpg","./images/2024/kdbaross/IMG_8539 Kevin Baross.jpeg.800.jpg","./images/2024/kdbaross/IMG_8540 Kevin Baross.jpeg.800.jpg","./images/2024/kdbaross/IMG_8549 Kevin Baross.jpeg.800.jpg","./images/2024/kdbaross/IMG_8551 Kevin Baross.jpeg.800.jpg","./images/2024/kdbaross/IMG_8556 Kevin Baross.jpeg.800.jpg","./images/2024/ez.el.joe/inbound1195495856998618557 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound1497171262105202177 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound1530696128336910598 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound1839690206720867368 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound217867578771332278 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound2311260292908562629 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound275962090249123363 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound2828898128577182440 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound3646872218435194413 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound3724640496739105332 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound4048159002816309054 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound454949503061312396 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound4611205475387680714 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound4774359546452814362 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound5165434597697825362 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound5879246722284645264 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound6000277133117106623 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound6035219428283988928 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound6266552343671432627 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound6396299230446797604 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound7248518205058708667 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound7281763717592690229 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound7407031134085351685 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound8345080870658605439 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound863392962384906733 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound8931246843495669560 Jose Leal.jpg.800.jpg","./images/2024/ez.el.joe/inbound8936461605772332288 Jose Leal.jpg.800.jpg","./images/2024/el_famoso619/IMG_1943 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1944 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1945 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1946 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1947 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1948 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1949 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1950 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1952 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1953 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1955 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1956 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1957 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1958 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1959 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1960 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1961 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1962 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1963 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1964 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1965 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1966 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1967 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1968 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1969 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1970 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1971 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1972 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1973 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1974 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1975 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1976 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1977 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1978 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1979 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1980 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1981 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1982 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1983 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1984 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1985 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1986 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1987 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1988 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1989 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1990 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1991 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1992 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1993 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1994 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1995 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1996 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1997 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1998 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_1999 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2001 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2002 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2003 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2004 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2005 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2006 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2008 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2009 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2010 David painted.jpeg.800.jpg","./images/2024/el_famoso619/IMG_2011 David painted.jpeg.800.jpg"];

      var movie_list = ["hummusrules|https://www.dropbox.com/scl/fi/p2dcf3gzn6rw7pi0qcddr/20240820_184429-dave.mp4?rlkey=ptdv93xb0idkfvtds1xsax8if&raw=1","hummusrules|https://www.dropbox.com/scl/fi/sg4zkcsdruwp0dypab9ai/20240820_184326-dave.mp4?rlkey=afvonp6o9wyx39pbvv425zzg6&raw=1","hummusrules|https://www.dropbox.com/scl/fi/2h4c7o2kwzbhco37uhqxv/20240820_184313-dave.mp4?rlkey=6cwwu4b52mzaqcx3a6g82yat8&raw=1","hummusrules|https://www.dropbox.com/scl/fi/s2jbysgeaj9z424ilmg0i/20240820_184225-dave.mp4?rlkey=fduml0wtiz97sqzrtxyo0a7sx&raw=1","hummusrules|https://www.dropbox.com/scl/fi/e4lmfh5iwe3o13hx6nf36/20240820_183936-dave.mp4?rlkey=f1ueh7n4m4sze7pe5abypo829&raw=1","what.a.gunt|https://www.dropbox.com/scl/fi/affpffgbjqzuxfxdajs9h/20240821_120757_712-Matt.mp4?rlkey=rritcz733o2lu0b9mxyqm2esw&dl=0&raw=1","what.a.gunt|https://www.dropbox.com/scl/fi/sy1bfnppw25jfl5r2o8a9/20240821_120843_662-Matt.mp4?rlkey=4lj9sq9wdlt8mg1xdtmju32fb&dl=0&raw=1","what.a.gunt|https://www.dropbox.com/scl/fi/jwf1qzzbqx02499l6jini/20240821_120905_918-Matt.mp4?rlkey=dyqsfx0jwni65wuoe1pl0erjv&dl=0&raw=1","what.a.gunt|https://www.dropbox.com/scl/fi/s1pkavygnvlzgtmog9jtp/20240821_120927_077-Matt.mp4?rlkey=fmzam3arvdxo7vs8zum3vh8yw&dl=0&raw=1","what.a.gunt|https://www.dropbox.com/scl/fi/soymxxrw04xtkisvmvstt/20240821_152637_184-Matt.mp4?rlkey=5e6ahx4sbkzi7857skbhiz1p5&dl=0&raw=1","ez.el.joe|https://www.dropbox.com/scl/fi/15po5cn0p23vd0e41rqts/inbound2450664089875833357-Jose-Leal.mp4?rlkey=p710l5ubcbs3jungedet6o73m&raw=1","ez.el.joe|https://www.dropbox.com/scl/fi/xfprayircv4ukjs4xdhyo/inbound6718447986240126873-Jose-Leal.mp4?rlkey=ilnyzmd2y56njrtgp30dy9mfb&raw=1","ez.el.joe|https://www.dropbox.com/scl/fi/c26nywk4y932p2igqdc3n/inbound84032134188844657-Jose-Leal.mp4?rlkey=zo15gxb6d7e3wwm93xx3gumdp&raw=1","kdbaross|https://www.dropbox.com/scl/fi/6wq84elx469e2gp7y11uo/IMG_8562-Kevin-Baross.mov?rlkey=dlabkzl767cb1mo6ymnrvtush&dl=0&raw=1","kdbaross|https://www.dropbox.com/scl/fi/timzdqi6w9l5jvx786n8p/IMG_8560-Kevin-Baross.mov?rlkey=1sowdlcmsjrr76d9visqen66m&dl=0&raw=1","kdbaross|https://www.dropbox.com/scl/fi/5d1za9zapsbpfgby1j08n/IMG_8558-Kevin-Baross.mov?rlkey=zkisotzf0ogl26mxyj75z21lb&dl=0&raw=1","kdbaross|https://www.dropbox.com/scl/fi/0gor8dplmx2widrafp08t/IMG_8557-Kevin-Baross.mov?rlkey=llqk83vq5a1o13s3o4hdsfybd&dl=0&raw=1","kdbaross|https://www.dropbox.com/scl/fi/4keb5whp78d49ffeng3y3/IMG_8555-Kevin-Baross.mov?rlkey=kbca5ro10mcm6b95wpo4qirr6&dl=0&raw=1","kdbaross|https://www.dropbox.com/scl/fi/lfuxm65upzt7v9drfefps/IMG_8553-Kevin-Baross.mov?rlkey=4ko7j61kv3zth9ky14an1ft9l&dl=0&raw=1","kdbaross|https://www.dropbox.com/scl/fi/5we2j8yrqsj240n2b9230/IMG_8552-Kevin-Baross.mov?rlkey=8j8bfa8sk1lig2ne2dbtngkv7&dl=0&raw=1"];
      for(let m of movie_list) {
        image_list.push(m);
      }

      image_list.sort(() => Math.random() - 0.5);

      var image_files = [];
      var video_files = [];

      var people_lookup = {"what.a.gunt":{"handle":"@what.a.grunt","name":"Matt Gunter","link":"https://www.instagram.com/what.a.gunt/"},"el_famoso619":{"handle":"@el_famoso619","name":"David “El Famoso” P","link":"https://www.instagram.com/el_famoso619/"},"kdbaross":{"handle":"@kdbaross","name":"Kevin Baross","link":"https://www.instagram.com/kdbaross/"},"ez.el.joe":{"handle":"@ez.el.joe","name":"Jose Leal Moya","link":"https://www.instagram.com/ez.el.joe/"},"hummusrules":{"handle":"@hummusrules","name":"Dave M","link":"https://www.instagram.com/hummusrules/"}};
      // console.log(people_lookup);

      // var initialized_image_count = 0;
      var pages_of_images_loaded = 0;
      var max_initial_images = 42;
      window.grid = false;
      var $images = $('.images');

      function createImageOrVideoEl(img_src) {
        let $wrapper = false;
        if(img_src) {
          
          $wrapper = $(document.createElement('div'));
          // console.log(i, img_src, person, people_lookup[person]);
          $wrapper.addClass('image_wrapper');

          var $img = false;
          var person = false;
          if(img_src.indexOf('|') > -1) {
            $img = $(document.createElement('video'));
            $img.on('onloadeddata', function(){
              grid.reInit();
            });
            $img.attr('onloadeddata','window.reinitgrid()');
            $img.html('<source src="'+img_src.split('|')[1]+'">');
            $img.attr('controls', 'controls');

            $wrapper.append($img);

            var person_name = img_src.split('|')[0];
            if(person_name) {
              console.log('person for video', person_name);

              var $caption = $(document.createElement('caption'));
              $caption.html('📹: <a href="'+people_lookup[person_name].link+'" target="_blank">'+people_lookup[person_name].name+'</a>')
              $wrapper.append($caption);
              $wrapper.attr('data-person', person_name);
            }

          } else {
            $img = $(document.createElement('img'));
            $img.attr('src', img_src);
            $wrapper.append($img);
            var person_name = img_src.split('/')[3];
            if(people_lookup[person_name]) {
              var $caption = $(document.createElement('caption'));
              $caption.html('📷: <a href="'+people_lookup[person_name].link+'" target="_blank">'+people_lookup[person_name].name+'</a>')
              $wrapper.append($caption);
              $wrapper.attr('data-person', person_name);
              
            }
          }

        }
        return $wrapper;
      }

      function injectPageOfImages() {
        var this_count = 0;
        var initial_offset = pages_of_images_loaded*max_initial_images;
        // initial_offset++;
        // console.log(initial_offset);

        for(var i = initial_offset; i < (pages_of_images_loaded+1)*max_initial_images; i++) {
          img_src = image_list[i];
          var $wrapper = createImageOrVideoEl(img_src);
          if($wrapper) {
            $images.append($wrapper);
          }
        }
      

        $('.loaded_so_far').text(Math.min(image_files.length,(pages_of_images_loaded+1)*max_initial_images));
        if((pages_of_images_loaded+1)*max_initial_images >=  image_files.length) {
          $('.load_more').remove();
        }


        pages_of_images_loaded++;

        if(!grid) {
          var cols = 6;
          var ww = $(window).width();
          // console.log('ww', ww);
          if(ww < 1200) {
            cols = 4;
          }
          if(ww < 800) {
            cols = 2;
          }
          console.log(ww);
          grid = Macy({
              container: '.images',
              // trueOrder: true,
              waitForImages: false,
              margin: 2,
              columns: cols
          });
        } else {
          window.setTimeout(function(){
            grid.reInit();
          },100);
          window.setTimeout(function(){
            grid.reInit();
          },500);
          window.setTimeout(function(){
            grid.reInit();
          },1000);

          
        }
        
      }

      $('.load_more_images').click(function(){

        if(max_initial_images*pages_of_images_loaded < image_list.length) {
          injectPageOfImages();
          // grid.recalculate();
        } else {
          console.log('too many pages already');
        }


      });

      // console.log(image_list);
      
      
      var thank_you_obj = {};

      for (let i of image_list) {
        // if(i.indexOf('.mov') > -1 || i.indexOf('.mp4') > -1 || i.indexOf('.MP4') > -1) {
        //   //movie
        //   video_files.push(i);
        // } else {

        // console.log(i);

        var person = i.split('/')[3];
        if(i.indexOf('|') > -1) {
          person = i.split('|')[0];
          console.log(person);
        }
        
        
        if(people_lookup[person]){
          if(thank_you_obj[person]) {
            thank_you_obj[person]++;
          } else {
            thank_you_obj[person] = 1;
          }
        }
        
        image_files.push(i);
          
        // }



        $('.loaded').text(image_files.length);
      }

      console.log(thank_you_obj);

      var sorted_people = Object.entries(thank_you_obj)
        .sort((a, b) => b[1] - a[1])
        .map(entry => entry[0]);

      var thanks = 'Thanks to ';
      var person_count = 0;

      for(var p of sorted_people) {
        person_count++;

        var person_name = p;

        console.log(person_name);
        // var 

        thanks += '<a href="'+people_lookup[person_name].link+'" target="_blank">'+people_lookup[person_name].name+'</a>'+' ('+thank_you_obj[p]+' file'+(thank_you_obj[p]>1?'s':'')+')';
        if(person_count != sorted_people.length) {
          thanks += ' & '; 
        }
      }
      thanks += ' for contributing to these '+image_files.length+' images for TXWT 2024!';
      // console.log(thanks);
      $('.thankyous').html(thanks);

      injectPageOfImages();

      $(document).on('click', '.image_wrapper', function(){
        // Your code here
        $(this).toggleClass('caption');
      });


      // $(document).on( "scroll", function() {
      //   if(grid) {
      //     grid.reInit();
      //   }
      // });



      

    });

    

  </script>
</body>
</html>